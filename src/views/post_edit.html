{{ define "post_form" }}
<form id="post-edit" action="/create-post" method="post">
    <input hidden="true" value="{{ .Post.Id.Hex }}" name="post-id"/>
    <label for="title">Title</label>
    <input type="text" id="title" name="title" value="{{ .Post.Title }}"/>
    <div id="new-post">{{ .MarkDown }}</div>
    <label for="post-text">Content</label>
    <textarea id="post-text" name="post-text" class="w-50 h-50" hx-post="/parse-md" hx-target="#new-post" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms">{{ .Post.Body }}</textarea>
    <label for="synopsys">Synopsys</label>
    <textarea id="synopsys" name="synopsys" class="w-50 h-50">{{ .Post.Synopsys }}</textarea>
    <label for="cover-image">Cover Image</label>
    <img src="/uploads/{{ .Post.CoverImage }}" alt="post cover image" id="cover-image"/>
    <input hidden="true" value={{ .Post.CoverImage }} name="cover-image" />
    <button type="submit">Submit</button>
</form>
<form hx-encoding='multipart/form-data' hx-post='/upload'
          _='on htmx:xhr:progress(loaded, total) set #progress.value to (loaded/total)*100
             on htmx:afterOnLoad(evt) 
                set response to JSON.parse(evt.detail.xhr.responseText)
                set #cover-image.src to response.path
                set #cover-image-input.value to response.filename'>
    <input type='file' name='file'>
    <button>
        Upload
    </button>
    <progress id='progress' value='0' max='100'></progress>
    <button type="submit">Upload</button>   
</form>
{{ end }}
